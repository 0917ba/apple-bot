# 🍎 Apple Game — Board 클래스 설명서

이 문서는 `board.py`의 `Board` 클래스를 설명합니다.  
학생들이 **봇(MyBot)** 을 만들 때 참고하세요.

---

## 📌 Board 클래스 개요

- 보드 크기: 기본 **10행 × 17열**
- 각 칸에는 `1 ~ 9` 중 하나의 숫자가 들어간다.
- 직사각형(`rect`) 영역의 합이 **10**이면 그 영역의 사과들을 없앨 수 있다.
- 없앤 칸은 **0**으로 바뀌며, 다시 채워지지 않는다. (중력/리필 없음)
- 점수는 **없앤 칸의 개수**로 계산된다.

---

## 🔧 생성자

### `__init__(self, H: int = 10, W: int = 17, seed: int = 42)`

보드를 새로 생성한다.

- **매개변수**

  - `H`: 보드 높이 (기본 10)
  - `W`: 보드 너비 (기본 17)
  - `seed`: 난수 시드 (같은 시드를 주면 같은 보드가 생성됨)

- **속성**
  - `grid`: 현재 보드 상태 (2차원 리스트)
  - `score`: 현재 점수
  - `total_moves`: 총 시도 횟수
  - `failed_moves`: 잘못된 수 시도 횟수
  - `successful_moves`: 성공한 수 횟수

---

## ➕ 합 계산

### `get_rectangle_sum(self, rect: Rect) -> int`

- `rect` 직사각형 내부 값들의 합을 계산한다.
- `rect`: `(r1, c1, r2, c2)` (1-based 좌표)
- **반환값**: 합계 (정수)

---

## 🔍 유효한 수 찾기

### `find_all_valid_moves(self) -> List[Tuple[Rect, int]]`

- 현재 보드에서 **합이 10이 되는 모든 직사각형**을 찾는다.
- **반환값**: 리스트
  - `(rect, apples_count)`
    - `rect`: `(r1, c1, r2, c2)` (1-based 좌표)
    - `apples_count`: 직사각형 안의 **0이 아닌 칸 개수**

---

## ✅ 규칙 체크

### `is_valid_matching(self, rect: Rect) -> bool`

- `rect`의 합이 **10**인지 확인한다.
- **반환값**: `True` / `False`

---

## 🍏 사과 개수 세기

### `count_apples_inside_rectangle(self, rect: Rect) -> int`

- 직사각형 안에서 **0이 아닌 칸**의 개수를 센다.
- **반환값**: 정수 (사과 개수)

---

## 🎮 수 적용하기

### `apply_move(self, rect: Rect) -> None`

- `rect`의 합이 10이면:
  - 그 안의 **0이 아닌 칸 개수만큼 점수 증가**
  - 해당 영역 칸이 전부 0으로 변경됨
  - `successful_moves` +1
- 합이 10이 아니면:
  - `failed_moves` +1
- `total_moves`는 항상 +1

---

## 🛠️ 디버그용

### `print_board(self) -> None`

- 보드 상태를 터미널에 출력한다.
- 점수, 총 수, 성공/실패 횟수도 함께 표시한다.

### `print_statistics(self) -> None`

- 현재 보드에 남아 있는 **숫자별 개수(1~9)**를 출력한다.

---

## 📖 Rect 좌표 규칙

- 모든 메서드에서 `rect`는 **1-based 좌표**를 사용한다.
- 예: `(1, 1, 2, 3)` → `r1=1, c1=1, r2=2, c2=3`  
  → (1행 1열)에서 (2행 3열)까지의 직사각형.

---

## 📝 사용 예시

```python
from board import Board

# 보드 생성 (10x17, seed=42)
b = Board()

# 보드 출력
b.print_board()

# 가능한 모든 수(직사각형) 찾기
moves = b.find_all_valid_moves()
print("가능한 수 개수:", len(moves))

# 첫 번째 수 적용
if moves:
    rect, apples = moves[0]
    print("적용할 수:", rect, "사과 개수:", apples)
    b.apply_move(rect)

# 보드 상태 확인
b.print_board()
```
